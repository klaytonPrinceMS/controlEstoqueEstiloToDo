<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Sistema de Gest√£o de Estoque Enterprise v1.0.20250111">
    <title>Sistema de Estoque Enterprise v1.0.20250111</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <!-- ============================================
         TELA DE LOGIN
         ============================================ -->
    <div id="tela-login">
        <div class="card-login">
            <h2>üöÄ Enterprise Login</h2>
            <div style="display: flex; flex-direction: column; gap: 15px; margin-top: 20px;">
                <input type="text" id="login-user" placeholder="Usu√°rio" autocomplete="username">
                <input type="password" id="login-pass" placeholder="Senha" autocomplete="current-password">
                <button onclick="realizarLogin()" class="btn-primario" style="padding: 12px;">Entrar no Sistema</button>
                <button onclick="resetEmergencia()" style="background:none; color:#cbd5e0; font-size:0.7rem; margin-top:10px; cursor:pointer; border:none;">Esqueci a senha / Reset de F√°brica</button>
            </div>
        </div>
    </div>

    <!-- ============================================
         HEADER
         ============================================ -->
    <header>
        <div style="display: flex; align-items: center; gap: 10px;">
            <span style="font-size: 1.5rem;">üè¢</span>
            <h2 style="margin: 0; font-size: 1.2rem;">Enterprise Stock v1.0.20250111</h2>
        </div>
        <div id="info-sessao" style="display: flex; align-items: center; gap: 20px;">
            <span id="user-display" style="font-weight: 700;"></span>
            <button onclick="realizarLogout()" class="btn-perigo" style="background: none; color: var(--cor-perigo); padding: 0;">Sair</button>
        </div>
    </header>

    <!-- ============================================
         CONTE√öDO PRINCIPAL
         ============================================ -->
    <div class="container-principal">

        <!-- Pain√©is Administrativos -->
        <div id="paineis-admin" class="paineis-topo hidden">
            <!-- Painel: Entrada de Estoque -->
            <div class="card-controle">
                <h3>üì¶ Entrada e Busca</h3>
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <input type="text" id="busca-estoque" placeholder="Pesquisar item (parte do nome)..." oninput="filtrarEstoque(this.value)">
                    <div style="display: flex; gap: 10px;">
                        <input type="number" id="qtd-entrada" value="1" min="1">
                        <button onclick="adicionarItemEstoque()" class="btn-primario" style="flex-grow: 1;">Adicionar Novo Item</button>
                    </div>
                </div>
            </div>

            <!-- Painel: Novo Usu√°rio -->
            <div class="card-controle" id="painel-usuarios">
                <h3>üë• Novo Usu√°rio</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <input type="text" id="cad-user" placeholder="Login">
                    <input type="password" id="cad-pass" placeholder="Senha">
                    <select id="cad-tipo">
                        <option value="setor">Operador</option>
                        <option value="almoxarifado">Almoxarifado</option>
                        <option value="admin">Admin</option>
                    </select>
                    <select id="cad-setor">
                        <option value="">Sem Setor</option>
                    </select>
                </div>
                <button onclick="criarUsuario()" class="btn-sucesso" style="width: 100%; margin-top: 10px;">Cadastrar Usu√°rio</button>
            </div>

            <!-- Painel: Configura√ß√µes -->
            <div class="card-controle">
                <h3>üõ†Ô∏è Configura√ß√µes</h3>
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <button onclick="abrirModalSetor()" class="btn-alerta">Criar Novo Setor</button>
                    <button onclick="resetarSistema()" class="btn-perigo" id="btn-reset-total">Resetar Sistema Total</button>
                </div>
            </div>
        </div>

        <!-- Busca Global para Usu√°rios de Setor -->
        <div id="painel-busca-setor" class="card-controle hidden" style="margin-bottom: 20px;">
            <h3>üîç Pesquisar no Estoque Central</h3>
            <div style="display: flex; gap: 10px;">
                <input type="text" id="busca-global-estoque" placeholder="Buscar item dispon√≠vel no estoque..." style="flex-grow: 1;" oninput="buscarNoEstoque(this.value)">
            </div>
            <div id="resultados-busca-estoque" style="margin-top: 10px; display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 10px;"></div>
        </div>

        <!-- Se√ß√£o: Estoque e Solicita√ß√µes -->
        <div id="secao-estoque-solicitacoes" class="secao-setores hidden">
            <h2>üì¶ Gest√£o de Estoque e Solicita√ß√µes</h2>
            <div class="quadro-grid" id="quadro-gestao"></div>
        </div>

        <!-- Se√ß√£o: Demais Setores -->
        <div id="secao-demais-setores" class="secao-setores">
            <h2 id="titulo-secao-setores">Setores Operacionais</h2>
            <div class="quadro-grid" id="quadro-setores"></div>
        </div>

        <!-- Se√ß√£o: Auditoria (Apenas Admin) -->
        <div id="secao-auditoria" class="secao-admin hidden">
            <h3>üìã Gest√£o de Usu√°rios e Auditoria</h3>
            <table id="tabela-usuarios">
                <thead>
                    <tr>
                        <th>Usu√°rio</th>
                        <th>Tipo</th>
                        <th>Setor</th>
                        <th>√öltimo IP</th>
                        <th>ID Dispositivo</th>
                        <th>√öltimo Acesso</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>

            <h3 style="margin-top: 30px;">üïí Logs de Movimenta√ß√£o</h3>
            <div style="max-height: 300px; overflow-y: auto; background: #f8fafc; padding: 10px; border-radius: 8px; font-family: monospace; font-size: 0.8rem;" id="log-container"></div>
        </div>
    </div>

    <!-- ============================================
         MODAIS
         ============================================ -->

    <!-- Modal: Novo Setor -->
    <div id="modal-setor" class="modal">
        <div class="conteudo-modal">
            <h3 id="titulo-modal-setor">Novo Setor</h3>
            <div style="display: flex; flex-direction: column; gap: 15px;">
                <input type="text" id="setor-nome" placeholder="Nome do Setor">
                <input type="text" id="setor-emoji" placeholder="Emoji (ex: üõ†Ô∏è)">
                <div style="display: flex; align-items: center; gap: 10px;">
                    <label>Cor:</label>
                    <input type="color" id="setor-cor" value="#ffffff">
                </div>
                <div style="display: flex; justify-content: flex-end; gap: 10px;">
                    <button onclick="fecharModalSetor()" style="background: #e2e8f0;">Cancelar</button>
                    <button onclick="salvarSetor()" class="btn-primario">Salvar Setor</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Transfer√™ncia de Material -->
    <div id="modal-transferir" class="modal">
        <div class="conteudo-modal">
            <h3>üöö Transfer√™ncia de Material</h3>
            <p id="info-transferencia"></p>
            <input type="number" id="qtd-transferir" min="1" value="1" style="width: 100%; margin-bottom: 20px;">
            <div style="display: flex; justify-content: flex-end; gap: 10px;">
                <button onclick="fecharModalTransferir()" style="background: #e2e8f0;">Cancelar</button>
                <button onclick="confirmarTransferencia()" class="btn-sucesso">Confirmar Envio</button>
            </div>
        </div>
    </div>

    <!-- Modal: Solicita√ß√£o de Reposi√ß√£o -->
    <div id="modal-solicitar" class="modal">
        <div class="conteudo-modal">
            <h3>üîî Solicitar Reposi√ß√£o</h3>
            <p id="info-solicitacao"></p>
            <input type="number" id="qtd-solicitar" min="1" value="1" style="width: 100%; margin-bottom: 20px;">
            <div style="display: flex; justify-content: flex-end; gap: 10px;">
                <button onclick="fecharModalSolicitar()" style="background: #e2e8f0;">Cancelar</button>
                <button onclick="confirmarSolicitacao()" class="btn-primario">Enviar Pedido</button>
            </div>
        </div>
    </div>

    <!-- Container: Notifica√ß√µes Toast -->
    <div id="container-toast"></div>

    <!-- Scripts -->
    <script src="app.js"></script>
</body>
</html>